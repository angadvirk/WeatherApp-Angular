{"ast":null,"code":"import { trigger, transition, style, animate } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../data.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./list/list.component\";\nimport * as i5 from \"./details/details.component\";\n\nfunction ResultsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"div\", 4);\n    i0.ɵɵelement(5, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"An error occurred.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Please try again later. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultsComponent_div_2_div_1_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ResultsComponent_div_2_div_1_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return ctx_r7.addFavorite();\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 21);\n    i0.ɵɵelement(2, \"path\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultsComponent_div_2_div_1_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ResultsComponent_div_2_div_1_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return ctx_r9.removeFavorite();\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 24);\n    i0.ɵɵelement(2, \"path\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultsComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelementStart(1, \"div\", 10);\n    i0.ɵɵelementStart(2, \"h5\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12);\n    i0.ɵɵtemplate(5, ResultsComponent_div_2_div_1_button_5_Template, 3, 0, \"button\", 13);\n    i0.ɵɵtemplate(6, ResultsComponent_div_2_div_1_button_6_Template, 3, 0, \"button\", 14);\n    i0.ɵɵelementStart(7, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ResultsComponent_div_2_div_1_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.detailsButtonHandler();\n    });\n    i0.ɵɵelementStart(8, \"p\", 16);\n    i0.ɵɵtext(9, \" Details \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 17);\n    i0.ɵɵelement(11, \"path\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(12, \"app-list\", 19);\n    i0.ɵɵlistener(\"detailsRequested\", function ResultsComponent_div_2_div_1_Template_app_list_detailsRequested_12_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.parseDetails($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"@slideInOutLeft\", undefined);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Forecast at \", ctx_r3.forecastLocation, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.favAdded);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.favAdded);\n  }\n}\n\nfunction ResultsComponent_div_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelementStart(1, \"div\", 10);\n    i0.ɵɵelementStart(2, \"div\", 26);\n    i0.ɵɵelementStart(3, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ResultsComponent_div_2_div_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.updateView(\"list\");\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(4, \"svg\", 28);\n    i0.ɵɵelement(5, \"path\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"p\", 30);\n    i0.ɵɵtext(7, \" List \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h5\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"a\", 31);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(11, \"svg\", 32);\n    i0.ɵɵelement(12, \"path\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelement(13, \"app-details\", 34);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"@slideInOutRight\", undefined);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r4.detailsObject.date);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate4(\"href\", \"https://twitter.com/intent/tweet?text=The%20temperature%20in%20\", ctx_r4.forecastLocation, \"%20on%20\", ctx_r4.detailsObject.date, \"%20is%20\", ctx_r4.detailsObject.appTemp, \"%2E%20The%20weather%20conditions%20are%20\", ctx_r4.detailsObject.status, \"%2E&hashtags=CSCI571WeatherForecast\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"detailsObject\", ctx_r4.detailsObject);\n  }\n}\n\nfunction ResultsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ResultsComponent_div_2_div_1_Template, 13, 4, \"div\", 8);\n    i0.ɵɵtemplate(2, ResultsComponent_div_2_div_2_Template, 14, 7, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@noAnimParent\", undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showDetails);\n  }\n}\n\nexport let ResultsComponent = /*#__PURE__*/(() => {\n  class ResultsComponent {\n    constructor(dataService, router) {\n      this.dataService = dataService;\n      this.router = router;\n      this.forecastLocation = \"\";\n      this.showProgressBar = false;\n      this.showResults = false;\n      this.favAdded = false;\n      this.activeView = 'list'; // activeView can be 'list' or 'details'\n\n      this.showList = true;\n      this.showDetails = false;\n      this.detailsObject = {};\n      this.showError = false;\n    }\n\n    updateView(viewName) {\n      var _a;\n\n      this.activeView = viewName;\n\n      if (viewName === \"list\") {\n        this.showDetails = false;\n        setTimeout(() => this.showList = true, 100);\n      }\n\n      if (viewName === \"details\") {\n        this.showList = false;\n        setTimeout(() => this.showDetails = true, 100);\n      }\n\n      (_a = document.getElementById(\"mainNav\")) === null || _a === void 0 ? void 0 : _a.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"nearest\"\n      }); // this.router.navigate([], { fragment: \"test\" });\n    }\n\n    parseDetails(event) {\n      this.detailsObject = event; // this.detailsExist = true;\n\n      this.updateView('details');\n    }\n\n    addFavorite() {\n      localStorage.setItem(this.forecastLocation.split(', ')[0], this.forecastLocation.split(', ')[1]);\n      this.favAdded = true;\n    }\n\n    removeFavorite() {\n      // Remove it from localStorage\n      let city = this.forecastLocation.split(\", \")[0];\n      let state = this.forecastLocation.split(\", \")[1];\n\n      for (let i = 0; i < localStorage.length; i++) {\n        if (state === localStorage.getItem(city)) {\n          localStorage.removeItem(city);\n          break;\n        }\n      }\n\n      this.favAdded = false;\n    }\n\n    detailsButtonHandler() {\n      if (Object.keys(this.detailsObject).length > 0) {\n        // check if it corresponds to the current search somehow??\n        this.updateView('details');\n      }\n    }\n\n    ngOnInit() {\n      this.dataService.searching.subscribe(data => {\n        if (data === true) {\n          this.showError = false;\n          this.showProgressBar = true;\n          this.showResults = false;\n        }\n      });\n      this.dataService.tomorrowObject.subscribe(data => {\n        if (Object.keys(data).length > 0) {\n          if (this.showProgressBar) {\n            this.showProgressBar = false;\n          } // Error Checking\n\n\n          if (data.code > 400000) {\n            this.showError = true;\n            return;\n          }\n\n          this.showResults = true;\n          this.favAdded = false;\n          this.dataService.searchData.subscribe(data => {\n            if (Object.keys(data).length > 0) {\n              this.forecastLocation = data.forecastLocation;\n\n              for (let i = 0; i < localStorage.length; i++) {\n                if (this.forecastLocation.split(', ')[0] === localStorage.key(i) && this.forecastLocation.split(', ')[1] === localStorage.getItem(localStorage.key(i))) {\n                  this.favAdded = true;\n                }\n              }\n            }\n          });\n        } else {\n          this.showResults = false;\n          this.showError = false;\n        }\n      });\n    }\n\n  }\n\n  ResultsComponent.ɵfac = function ResultsComponent_Factory(t) {\n    return new (t || ResultsComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ResultsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ResultsComponent,\n    selectors: [[\"app-results\"]],\n    decls: 3,\n    vars: 3,\n    consts: [[\"class\", \"container\", \"id\", \"progressBarContainer\", 4, \"ngIf\"], [\"class\", \"container\", \"id\", \"errorContainer\", 4, \"ngIf\"], [4, \"ngIf\"], [\"id\", \"progressBarContainer\", 1, \"container\"], [1, \"progress\"], [\"role\", \"progressbar\", \"aria-valuenow\", \"50\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-striped\", \"progress-bar-animated\", 2, \"width\", \"50%\"], [\"id\", \"errorContainer\", 1, \"container\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"resultView\"], [\"class\", \"resultView\", 4, \"ngIf\"], [1, \"resultView\"], [1, \"container\"], [1, \"text-center\"], [1, \"text-right\", 2, \"margin-bottom\", \"0.5em\"], [\"class\", \"btn\", \"id\", \"favoriteButton\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn\", \"id\", \"removeFavoriteButton\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"detailsButton\", 1, \"btn\", \"btn-light\", 3, \"click\"], [2, \"margin\", \"0\", \"display\", \"inline-block\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 10\", 1, \"bi\", \"bi-chevron-right\", 2, \"overflow\", \"visible\"], [\"fill-rule\", \"evenodd\", \"d\", \"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\"], [3, \"detailsRequested\"], [\"id\", \"favoriteButton\", 1, \"btn\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"18\", \"height\", \"18\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 14\", 1, \"bi\", \"bi-star\", 2, \"overflow\", \"visible\"], [\"d\", \"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"], [\"id\", \"removeFavoriteButton\", 1, \"btn\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"18\", \"height\", \"18\", \"fill\", \"#F6CE46\", \"viewBox\", \"0 0 16 14\", 1, \"bi\", \"bi-star-fill\", 2, \"overflow\", \"visible\"], [\"d\", \"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"], [1, \"d-flex\", \"justify-content-between\", 2, \"margin-bottom\", \"0.5em\"], [\"id\", \"listButton\", 1, \"btn\", \"btn-outline-dark\", \"secondaryButton\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 10\", 1, \"bi\", \"bi-chevron-left\", 2, \"overflow\", \"visible\"], [\"fill-rule\", \"evenodd\", \"d\", \"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z\"], [2, \"margin\", \"0\", \"margin-left\", \"0.1em\", \"display\", \"inline-block\"], [\"target\", \"_blank\", 1, \"twitterButton\", 3, \"href\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"18\", \"height\", \"18\", \"fill\", \"white\", \"viewBox\", \"0 0 16 10\", 1, \"bi\", \"bi-twitter\", 2, \"overflow\", \"visible\"], [\"d\", \"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z\"], [3, \"detailsObject\"]],\n    template: function ResultsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ResultsComponent_div_0_Template, 6, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, ResultsComponent_div_1_Template, 5, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, ResultsComponent_div_2_Template, 3, 3, \"div\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.showProgressBar);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showError);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showResults);\n      }\n    },\n    directives: [i3.NgIf, i4.ListComponent, i5.DetailsComponent],\n    styles: [\"\"],\n    data: {\n      animation: [trigger(\"noAnimParent\", [transition(':enter', [])]), trigger(\"slideInOutLeft\", [transition(\"void => *\", [style({\n        transform: 'translateX(-100%)'\n      }), animate('250ms')]), transition('* => void', [animate('125ms', style({\n        transform: 'translateX(-100%)'\n      }))])]), trigger(\"slideInOutRight\", [transition(\"void => *\", [style({\n        transform: 'translateX(100%)'\n      }), animate('250ms')]), transition('* => void', [animate('125ms', style({\n        transform: 'translateX(100%)'\n      }))])])]\n    }\n  });\n  return ResultsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}