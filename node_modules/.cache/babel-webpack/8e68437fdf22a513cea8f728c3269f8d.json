{"ast":null,"code":"/*\n Highcharts JS v9.3.1 (2021-11-05)\n\n Wind barb series module\n\n (c) 2010-2021 Torstein Honsi\n\n License: www.highcharts.com/license\n*/\n'use strict';\n\n(function (a) {\n  \"object\" === typeof module && module.exports ? (a[\"default\"] = a, module.exports = a) : \"function\" === typeof define && define.amd ? define(\"highcharts/modules/windbarb\", [\"highcharts\"], function (h) {\n    a(h);\n    a.Highcharts = h;\n    return a;\n  }) : a(\"undefined\" !== typeof Highcharts ? Highcharts : void 0);\n})(function (a) {\n  function h(a, b, f, t) {\n    a.hasOwnProperty(b) || (a[b] = t.apply(null, f));\n  }\n\n  a = a ? a._modules : {};\n  h(a, \"Series/OnSeriesComposition.js\", [a[\"Series/Column/ColumnSeries.js\"], a[\"Core/Series/Series.js\"], a[\"Core/Utilities.js\"]], function (a, b, f) {\n    var t = a.prototype,\n        d = b.prototype,\n        w = f.defined,\n        y = f.stableSort,\n        k;\n\n    (function (a) {\n      function b() {\n        return d.getPlotBox.call(this.options.onSeries && this.chart.get(this.options.onSeries) || this);\n      }\n\n      function k() {\n        t.translate.apply(this);\n        var a = this,\n            g = a.options,\n            q = a.chart,\n            e = a.points,\n            c = g.onSeries,\n            x = (c = c && q.get(c)) && c.options.step,\n            r = c && c.points,\n            m = q.inverted,\n            d = a.xAxis,\n            b = a.yAxis;\n        q = e.length - 1;\n        var k;\n        g = g.onKey || \"y\";\n        var f = r && r.length,\n            h = 0,\n            p;\n\n        if (c && c.visible && f) {\n          h = (c.pointXOffset || 0) + (c.barW || 0) / 2;\n          var l = c.currentDataGrouping;\n          var v = r[f - 1].x + (l ? l.totalRange : 0);\n          y(e, function (e, c) {\n            return e.x - c.x;\n          });\n\n          for (g = \"plot\" + g[0].toUpperCase() + g.substr(1); f-- && e[q];) {\n            var n = r[f];\n            l = e[q];\n            l.y = n.y;\n\n            if (n.x <= l.x && \"undefined\" !== typeof n[g]) {\n              if (l.x <= v && (l.plotY = n[g], n.x < l.x && !x && (p = r[f + 1]) && \"undefined\" !== typeof p[g])) {\n                var u = (l.x - n.x) / (p.x - n.x);\n                l.plotY += u * (p[g] - n[g]);\n                l.y += u * (p.y - n.y);\n              }\n\n              q--;\n              f++;\n              if (0 > q) break;\n            }\n          }\n        }\n\n        e.forEach(function (c, x) {\n          c.plotX += h;\n          if (\"undefined\" === typeof c.plotY || m) 0 <= c.plotX && c.plotX <= d.len ? m ? (c.plotY = d.translate(c.x, 0, 1, 0, 1), c.plotX = w(c.y) ? b.translate(c.y, 0, 0, 0, 1) : 0) : c.plotY = (d.opposite ? 0 : a.yAxis.len) + d.offset : c.shapeArgs = {};\n\n          if ((k = e[x - 1]) && k.plotX === c.plotX) {\n            \"undefined\" === typeof k.stackIndex && (k.stackIndex = 0);\n            var r = k.stackIndex + 1;\n          }\n\n          c.stackIndex = r;\n        });\n        this.onSeries = c;\n      }\n\n      var f = [];\n\n      a.compose = function (a) {\n        if (-1 === f.indexOf(a)) {\n          f.push(a);\n          var g = a.prototype;\n          g.getPlotBox = b;\n          g.translate = k;\n        }\n\n        return a;\n      };\n\n      a.getPlotBox = b;\n      a.translate = k;\n    })(k || (k = {}));\n\n    return k;\n  });\n  h(a, \"Series/Windbarb/WindbarbPoint.js\", [a[\"Core/Utilities.js\"], a[\"Series/Column/ColumnSeries.js\"]], function (a, b) {\n    var f = this && this.__extends || function () {\n      var a = function (d, b) {\n        a = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (a, d) {\n          a.__proto__ = d;\n        } || function (a, d) {\n          for (var b in d) d.hasOwnProperty(b) && (a[b] = d[b]);\n        };\n\n        return a(d, b);\n      };\n\n      return function (d, b) {\n        function f() {\n          this.constructor = d;\n        }\n\n        a(d, b);\n        d.prototype = null === b ? Object.create(b) : (f.prototype = b.prototype, new f());\n      };\n    }(),\n        h = a.isNumber;\n\n    return function (a) {\n      function b() {\n        var b = null !== a && a.apply(this, arguments) || this;\n        b.beaufort = void 0;\n        b.beaufortLevel = void 0;\n        b.direction = void 0;\n        b.options = void 0;\n        b.series = void 0;\n        return b;\n      }\n\n      f(b, a);\n\n      b.prototype.isValid = function () {\n        return h(this.value) && 0 <= this.value;\n      };\n\n      return b;\n    }(b.prototype.pointClass);\n  });\n  h(a, \"Series/Windbarb/WindbarbSeries.js\", [a[\"Core/Animation/AnimationUtilities.js\"], a[\"Core/Globals.js\"], a[\"Series/OnSeriesComposition.js\"], a[\"Core/Series/SeriesRegistry.js\"], a[\"Core/Utilities.js\"], a[\"Series/Windbarb/WindbarbPoint.js\"]], function (a, b, f, h, d, w) {\n    var t = this && this.__extends || function () {\n      var a = function (b, e) {\n        a = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (a, e) {\n          a.__proto__ = e;\n        } || function (a, e) {\n          for (var c in e) e.hasOwnProperty(c) && (a[c] = e[c]);\n        };\n\n        return a(b, e);\n      };\n\n      return function (b, e) {\n        function c() {\n          this.constructor = b;\n        }\n\n        a(b, e);\n        b.prototype = null === e ? Object.create(e) : (c.prototype = e.prototype, new c());\n      };\n    }(),\n        k = a.animObject;\n\n    a = b.noop;\n    var p = h.series,\n        v = h.seriesTypes.column,\n        u = d.extend,\n        A = d.merge,\n        z = d.pick;\n\n    d = function (a) {\n      function d() {\n        var e = null !== a && a.apply(this, arguments) || this;\n        e.data = void 0;\n        e.options = void 0;\n        e.points = void 0;\n        return e;\n      }\n\n      t(d, a);\n\n      d.registerApproximation = function () {\n        b.approximations && !b.approximations.windbarb && (b.approximations.windbarb = function (a, c) {\n          var e = 0,\n              d = 0,\n              m,\n              f = a.length;\n\n          for (m = 0; m < f; m++) e += a[m] * Math.cos(c[m] * b.deg2rad), d += a[m] * Math.sin(c[m] * b.deg2rad);\n\n          return [a.reduce(function (a, c) {\n            return a + c;\n          }, 0) / a.length, Math.atan2(d, e) / b.deg2rad];\n        });\n      };\n\n      d.prototype.init = function (a, c) {\n        d.registerApproximation();\n        p.prototype.init.call(this, a, c);\n      };\n\n      d.prototype.pointAttribs = function (a, c) {\n        var e = this.options;\n        a = a.color || this.color;\n        var b = this.options.lineWidth;\n        c && (a = e.states[c].color || a, b = (e.states[c].lineWidth || b) + (e.states[c].lineWidthPlus || 0));\n        return {\n          stroke: a,\n          \"stroke-width\": b\n        };\n      };\n\n      d.prototype.windArrow = function (a) {\n        var c = 1.943844 * a.value,\n            b = this.options.vectorLength / 20,\n            e = -10;\n        if (a.isNull) return [];\n        if (0 === a.beaufortLevel) return this.chart.renderer.symbols.circle(-10 * b, -10 * b, 20 * b, 20 * b);\n        a = [[\"M\", 0, 7 * b], [\"L\", -1.5 * b, 7 * b], [\"L\", 0, 10 * b], [\"L\", 1.5 * b, 7 * b], [\"L\", 0, 7 * b], [\"L\", 0, -10 * b]];\n        var d = (c - c % 50) / 50;\n        if (0 < d) for (; d--;) a.push(-10 === e ? [\"L\", 0, e * b] : [\"M\", 0, e * b], [\"L\", 5 * b, e * b + 2], [\"L\", 0, e * b + 4]), c -= 50, e += 7;\n        d = (c - c % 10) / 10;\n        if (0 < d) for (; d--;) a.push(-10 === e ? [\"L\", 0, e * b] : [\"M\", 0, e * b], [\"L\", 7 * b, e * b]), c -= 10, e += 3;\n        d = (c - c % 5) / 5;\n        if (0 < d) for (; d--;) a.push(-10 === e ? [\"L\", 0, e * b] : [\"M\", 0, e * b], [\"L\", 4 * b, e * b]), c -= 5, e += 3;\n        return a;\n      };\n\n      d.prototype.drawPoints = function () {\n        var a = this.chart,\n            b = this.yAxis,\n            d = a.inverted,\n            f = this.options.vectorLength / 2;\n        this.points.forEach(function (c) {\n          var e = c.plotX,\n              g = c.plotY;\n          !1 === this.options.clip || a.isInsidePlot(e, 0) ? (c.graphic || (c.graphic = this.chart.renderer.path().add(this.markerGroup).addClass(\"highcharts-point highcharts-color-\" + z(c.colorIndex, c.series.colorIndex))), c.graphic.attr({\n            d: this.windArrow(c),\n            translateX: e + this.options.xOffset,\n            translateY: g + this.options.yOffset,\n            rotation: c.direction\n          }), this.chart.styledMode || c.graphic.attr(this.pointAttribs(c))) : c.graphic && (c.graphic = c.graphic.destroy());\n          c.tooltipPos = [e + this.options.xOffset + (d && !this.onSeries ? f : 0), g + this.options.yOffset - (d ? 0 : f + b.pos - a.plotTop)];\n        }, this);\n      };\n\n      d.prototype.animate = function (a) {\n        a ? this.markerGroup.attr({\n          opacity: .01\n        }) : this.markerGroup.animate({\n          opacity: 1\n        }, k(this.options.animation));\n      };\n\n      d.prototype.markerAttribs = function (a, c) {\n        return {};\n      };\n\n      d.prototype.getExtremes = function () {\n        return {};\n      };\n\n      d.prototype.shouldShowTooltip = function (b, c, d) {\n        void 0 === d && (d = {});\n        d.ignoreX = this.chart.inverted;\n        d.ignoreY = !d.ignoreX;\n        return a.prototype.shouldShowTooltip.call(this, b, c, d);\n      };\n\n      d.defaultOptions = A(v.defaultOptions, {\n        dataGrouping: {\n          enabled: !0,\n          approximation: \"windbarb\",\n          groupPixelWidth: 30\n        },\n        lineWidth: 2,\n        onSeries: null,\n        states: {\n          hover: {\n            lineWidthPlus: 0\n          }\n        },\n        tooltip: {\n          pointFormat: '<span style=\"color:{point.color}\">\\u25cf</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'\n        },\n        vectorLength: 20,\n        colorKey: \"value\",\n        yOffset: -20,\n        xOffset: 0\n      });\n      return d;\n    }(v);\n\n    f.compose(d);\n    u(d.prototype, {\n      beaufortFloor: [0, .3, 1.6, 3.4, 5.5, 8, 10.8, 13.9, 17.2, 20.8, 24.5, 28.5, 32.7],\n      beaufortName: \"Calm;Light air;Light breeze;Gentle breeze;Moderate breeze;Fresh breeze;Strong breeze;Near gale;Gale;Strong gale;Storm;Violent storm;Hurricane\".split(\";\"),\n      parallelArrays: [\"x\", \"value\", \"direction\"],\n      pointArrayMap: [\"value\", \"direction\"],\n      pointClass: w,\n      trackerGroups: [\"markerGroup\"],\n      invertGroups: a,\n      translate: function () {\n        var a = this.beaufortFloor,\n            b = this.beaufortName;\n        f.translate.call(this);\n        this.points.forEach(function (d) {\n          for (var c = 0; c < a.length && !(a[c] > d.value); c++);\n\n          d.beaufortLevel = c - 1;\n          d.beaufort = b[c - 1];\n        });\n      }\n    });\n    d.registerApproximation();\n    h.registerSeriesType(\"windbarb\", d);\n    \"\";\n    return d;\n  });\n  h(a, \"masters/modules/windbarb.src.js\", [], function () {});\n}); //# sourceMappingURL=windbarb.js.map","map":null,"metadata":{},"sourceType":"script"}